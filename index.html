<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø±Ø§Ø³Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: "Cairo", sans-serif;
      background: #f3f4f6;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
      direction: rtl;
    }
    table {
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      width: 95%;
      max-width: 720px;
      margin-top: 12px;
    }
    th, td {
      border: 1px solid #999;
      padding: 10px;
      text-align: center;
      font-size: 1rem;
    }
    th {
      background: #2563eb;
      color: white;
      font-weight: 700;
    }
    caption {
      caption-side: top;
      font-weight: 800;
      margin-bottom: 12px;
      font-size: 1.3rem;
      color: #1e3a8a;
    }
    .week-title {
      background: #e0e7ff;
      font-weight: bold;
    }
    h2 {
      text-align: center;
      color: #1e3a8a;
      margin-bottom: 8px;
    }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    button {
      background: #2563eb;
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #1e40af;
    }
    #monthLabel {
      font-weight: 800;
      font-size: 1.2rem;
      color: #1e3a8a;
    }
    /* ğŸŒŸ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ */
    .today {
      background-color: #fff8c5 !important;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>

  <div>
    <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø±Ø§Ø³Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†</h2>

    <div class="controls">
      <button id="prevBtn">â—€ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      <span id="monthLabel"></span>
      <button id="nextBtn">Ø§Ù„Ø´Ù‡Ø± Ø§Ù„ØªØ§Ù„ÙŠ â–¶</button>
    </div>

    <table id="dutyTable">
      <thead>
        <tr>
          <th>Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</th>
          <th>ÙŠÙˆÙ… Ø§Ù„Ø­Ø±Ø§Ø³Ø©</th>
          <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
          <th>Ø§Ø³Ù… Ø§Ù„Ø³Ø§Ø¦Ù‚</th>
          <th>Ø§Ù„Ø¥Ù…Ø¶Ø§Ø¡</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <script>
  const daysArabic = ["Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©"];

  const weeklyDrivers = {
  1: ["Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØªÙ„","Ø§Ù„Ù…ÙƒÙŠ Ø§Ù„Ø³Ø¹ÙŠØ¯ÙŠ","Ø§Ø­Ù…Ø¯ Ø§Ù„ÙØ±Ø§Ø¹ÙŠ","Ø§ÙŠÙˆØ¨ Ø§Ù„Ø¹Ù…Ø±ÙŠ","Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØªÙ„"],
  2: ["Ø§Ù„Ù…ÙƒÙŠ Ø§Ù„Ø³Ø¹ÙŠØ¯ÙŠ","Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØªÙ„","Ø§ÙŠÙˆØ¨ Ø§Ù„Ø¹Ù…Ø±ÙŠ","Ø§Ø­Ù…Ø¯ Ø§Ù„ÙØ±Ø§Ø¹ÙŠ","Ø§Ù„Ù…ÙƒÙŠ Ø§Ù„Ø³Ø¹ÙŠØ¯ÙŠ"],
  3: ["Ø§Ø­Ù…Ø¯ Ø§Ù„ÙØ±Ø§Ø¹ÙŠ","Ø§ÙŠÙˆØ¨ Ø§Ù„Ø¹Ù…Ø±ÙŠ","Ø§Ù„Ù…ÙƒÙŠ Ø§Ù„Ø³Ø¹ÙŠØ¯ÙŠ","Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØªÙ„","Ø§Ø­Ù…Ø¯ Ø§Ù„ÙØ±Ø§Ø¹ÙŠ"],
  4: ["Ø§ÙŠÙˆØ¨ Ø§Ù„Ø¹Ù…Ø±ÙŠ","Ø§Ø­Ù…Ø¯ Ø§Ù„ÙØ±Ø§Ø¹ÙŠ","Ø§Ù„Ù…ÙƒÙŠ Ø§Ù„Ø³Ø¹ÙŠØ¯ÙŠ","Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØªÙ„","Ø§ÙŠÙˆØ¨ Ø§Ù„Ø¹Ù…Ø±ÙŠ"],
};


  let viewYear, viewMonth;

  function generateDutySchedule(year, month) {
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";

    const current = new Date(year, month);
    const monthLabel = new Intl.DateTimeFormat('ar', { month: 'long', year: 'numeric' }).format(current);
    document.getElementById("monthLabel").textContent = monthLabel;

    let startDate = new Date(year, month, 1);
    while (startDate.getDay() !== 1) startDate.setDate(startDate.getDate() + 1);

    const weeks = 4;
    const today = new Date();
    const todayStr = `${today.getDate().toString().padStart(2, "0")}/${(today.getMonth()+1).toString().padStart(2, "0")}/${today.getFullYear()}`;

    for (let week = 1; week <= weeks; week++) {
      const drivers = weeklyDrivers[week];

      for (let d = 0; d < 5; d++) {
        const currentDay = new Date(startDate);
        currentDay.setDate(startDate.getDate() + (week - 1) * 7 + d);

        const day = currentDay.getDate().toString().padStart(2, "0");
        const monthNum = (currentDay.getMonth() + 1).toString().padStart(2, "0");
        const yearNum = currentDay.getFullYear();
        const dateStr = `${day}/${monthNum}/${yearNum}`;

        const tr = document.createElement("tr");

        if (d === 0) {
          const tdWeek = document.createElement("td");
          tdWeek.textContent = `Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${week}`;
          tdWeek.className = "week-title";
          tdWeek.rowSpan = 5;
          tr.appendChild(tdWeek);
        }

        const tdDay = document.createElement("td");
        tdDay.textContent = daysArabic[d];

        const tdDate = document.createElement("td");
        tdDate.textContent = dateStr;

        const tdDriver = document.createElement("td");
        tdDriver.textContent = drivers[d];

        const tdSign = document.createElement("td");
        tdSign.textContent = "";

        // ğŸŒŸ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù‡Ùˆ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØŒ Ù†ØºÙŠØ± Ù„ÙˆÙ†Ù‡
        if (dateStr === todayStr) {
          tdDate.classList.add("today");
          tdDay.classList.add("today");
          tdDriver.classList.add("today");
        }

        tr.appendChild(tdDay);
        tr.appendChild(tdDate);
        tr.appendChild(tdDriver);
        tr.appendChild(tdSign);
        tbody.appendChild(tr);
      }
    }
  }

  function goToMonth(y, m) {
    viewYear = y;
    viewMonth = m;
    generateDutySchedule(y, m);
  }

  document.getElementById("prevBtn").addEventListener("click", () => {
    if (viewMonth === 0) {
      viewMonth = 11;
      viewYear--;
    } else {
      viewMonth--;
    }
    generateDutySchedule(viewYear, viewMonth);
  });

  document.getElementById("nextBtn").addEventListener("click", () => {
    if (viewMonth === 11) {
      viewMonth = 0;
      viewYear++;
    } else {
      viewMonth++;
    }
    generateDutySchedule(viewYear, viewMonth);
  });

  const now = new Date();
  goToMonth(now.getFullYear(), now.getMonth());
</script>

</body>
</html>
